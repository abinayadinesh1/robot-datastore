[kafka]
brokers = "100.81.222.59:9092"
topic = "camera.frames"
group_id = "frame-filter-group"
compression = "snappy"

[stream]
url = "http://100.107.96.29:8000/api/camera/stream"
quality = 80
fps = 10.0
mode = "mjpeg"   # "mjpeg" or "polling"

[filter]
primary = "phash"
phash_threshold = 26        # hamming distance (out of 256 bits) - 26, ~10% difference
phash_hash_size = 16
histogram_threshold = 0.15  # chi-squared distance

[rustfs]
endpoint = "http://100.81.222.59:9000"
access_key = "rustfsadmin"
secret_key = "rustfsadmin"
bucket = "camera-frames"
prefix = "camera/"   # modality name â€” becomes {robot_id}/camera/{date}/...

[eviction]
check_interval_secs = 30
threshold_percent = 80.0
target_percent = 70.0
batch_size = 50

[aws_s3]
bucket = "reachy-mini-frames-archive"
prefix = "archive/"
robot_id = "reachy-001"
region = "us-west-2"

[logging]
level = "info"

[database]
path = "data/"   # directory where {robot_id}.db SQLite files are created

[api]
port = 8080
rustfs_public_url = "http://100.81.222.59:9000"   # URL clients use to reach RustFS
rustfs_bucket = "camera-frames"

[recording]
segment_duration_secs = 60
codec = "h264"       # "h264" or "h265"
crf = 23             # quality: lower = better, 18-28 is typical range
preset = "fast"      # encoding speed: ultrafast, superfast, veryfast, faster, fast, medium, slow
fps = 10.0
active_to_idle_consecutive_frames = 5  # how many similar frames trigger idle transition
